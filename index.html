<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÏïÑÏù¥Îèå Îä•Î†•Ïπò Î∂ÑÏÑù Í≤ÄÏÇ¨</title>
    <!-- Tailwind CSS CDN --><script src="https://cdn.tailwindcss.com"></script>
    <!-- html2canvas ÎùºÏù¥Î∏åÎü¨Î¶¨ --><script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- Google Fonts --><link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Plus Jakarta Sans', 'Noto Sans KR', sans-serif;
            background-color: #F9FAFB; 
            color: #1F2937; 
            overflow: hidden; 
            touch-action: none;
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .scale-btn { transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); }
        .scale-btn:active { transform: scale(0.96); }

        .bento-item { transition: transform 0.2s, box-shadow 0.2s; }
        .bento-item:active { transform: scale(0.98); }

        canvas { max-width: 100%; }
        button { touch-action: manipulation; }
        
        .word-keep-all { word-break: keep-all; overflow-wrap: break-word; } 

        .progress-bar-inner {
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1), background-color 0.3s ease;
        }
    </style>
</head>
<body class="h-[100dvh] w-screen flex items-center justify-center bg-[#F3F4F6] overflow-hidden">

    <div id="app" class="w-full max-w-[420px] h-full max-h-[100dvh] sm:h-[850px] sm:max-h-[95vh] bg-[#FFFFFF] relative sm:rounded-[2rem] overflow-hidden flex flex-col shadow-2xl border border-[#E5E7EB]">
        <!-- Content -->
    </div>

    <script>
        const APP_STATE = {
            SESSION_SELECT: 'SESSION_SELECT',
            TEST_IN_PROGRESS: 'TEST_IN_PROGRESS',
            RESULT_VIEW: 'RESULT_VIEW'
        };

        let currentState = APP_STATE.SESSION_SELECT;
        let currentSession = null;
        let currentQuestionIndex = 0;
        let currentAnswers = [];
        
        let characterImage = null;
        let characterName = "ÏïÑÏù¥Îèå Î©§Î≤Ñ";
        let catchphrase = "ÏÑ∏ÏÉÅÏóêÏÑú Í∞ÄÏû• ÎπõÎÇòÎäî Î≥ÑÏù¥ Îê†Í≤åÏöî!";

        const sessionData = {
            'Vocal': {
                name: 'Î≥¥Ïª¨', engName: 'Vocal',
                theme: 'bg-[#FDE2E2] text-[#D66B6B] border-[#FAD2D2]',
                activeColor: '#D66B6B', lightColor: '#FFF0F0',
                questions: [
                    "ÏùåÏ†ï Ï†ïÌôïÎèÑÍ∞Ä Îß§Ïö∞ ÏïàÏ†ïÏ†ÅÏù¥Î©∞ ÌùîÎì§Î¶ºÏù¥ ÏóÜÏäµÎãàÎã§.", "Î¶¨Îì¨Í∞êÏù¥ Îõ∞Ïñ¥ÎÇò Ï†ïÎ∞ïÍ≥º ÏóáÎ∞ïÏùÑ ÏûêÏú†ÏûêÏû¨Î°ú ÌÉëÎãàÎã§.", "Ìò∏Ìù° Ï°∞Ï†à Îä•Î†•Ïù¥ Ï¢ãÏïÑ Í∏¥ Íµ¨Ï†àÎèÑ ÎÅäÍπÄ ÏóÜÏù¥ ÏÜåÌôîÌï©ÎãàÎã§.", "ÏÑ±ÎüâÏùò Í∞ïÏïΩ Ï°∞Ï†à(Îã§Ïù¥ÎÇ¥ÎØπ)Ïù¥ ÏÑ∏Î∞ÄÌïòÍ≥† ÌíçÎ∂ÄÌï©ÎãàÎã§.", "Í≥†ÏùåÏó≠ÎåÄÏóêÏÑú Ìûò ÏûàÍ≥† Íπ®ÎÅóÌïú ÏÜåÎ¶¨Î•º ÎÉÖÎãàÎã§.", "Ï†ÄÏùåÏó≠ÎåÄÏóêÏÑúÎèÑ Ïö∏Î¶ºÏù¥ Ï¢ãÍ≥† ÏïàÏ†ïÏ†ÅÏûÖÎãàÎã§.", "ÎπÑÎ∏åÎùºÌÜ†Ïùò ÏÜçÎèÑÏôÄ ÍπäÏù¥Î•º ÏùòÎèÑÎåÄÎ°ú Ï°∞Ï†àÌï©ÎãàÎã§.", "ÎØπÏä§ Î≥¥Ïù¥Ïä§ÏôÄ ÏßÑÏÑ±Ïùò Ï†ÑÌôòÏù¥ Îß§Ïö∞ Îß§ÎÅÑÎüΩÏäµÎãàÎã§.", "Í∞ÄÏÑ±(ÌåîÏÑ∏ÌÜ†)ÏùÑ Í≥µÍ∏∞ Î∞ò ÏÜåÎ¶¨ Î∞òÏúºÎ°ú ÏòàÏÅòÍ≤å ÎÉÖÎãàÎã§.", "ÏûêÏã†ÎßåÏùò Í≥†Ïú†ÌïòÍ≥† Îß§Î†•Ï†ÅÏù∏ ÏùåÏÉâÏùÑ Í∞ÄÏ°åÏäµÎãàÎã§.", "ÎÖ∏ÎûòÏùò Í∞êÏ†ïÏÑ†ÏùÑ ÌååÏïÖÌïòÍ≥† ÍπäÏù¥ ÏûàÍ≤å ÌëúÌòÑÌï©ÎãàÎã§.", "Í≥°Ïùò Î∂ÑÏúÑÍ∏∞Ïóê ÎßûÏ∂∞ Ï∞ΩÎ≤ïÏùÑ Ïú†Ïó∞ÌïòÍ≤å Î∞îÍøâÎãàÎã§.", "Í∞ÄÏÇ¨ Ï†ÑÎã¨Î†•(ÎîïÏÖò)Ïù¥ Ï†ïÌôïÌï¥ Î©îÏãúÏßÄÍ∞Ä Ïûò Îì§Î¶ΩÎãàÎã§.", "ÌôîÏùå(ÌïòÎ™®Îãà)ÏùÑ ÏåìÎäî Îä•Î†•Ïù¥ ÌÉÅÏõîÌï©ÎãàÎã§.", "Ïï†ÎìúÎ¶ΩÍ≥º Î©úÎ¶¨Ïä§ÎßàÎ•º Ï¶âÌù•Ï†ÅÏúºÎ°ú Íµ¨ÏÇ¨Ìï©ÎãàÎã§.", "Ïû•ÏãúÍ∞Ñ Í∞ÄÏ∞ΩÏóêÎèÑ Î™©ÏÜåÎ¶¨Ïùò ÏßàÏù¥ Ïú†ÏßÄÎê©ÎãàÎã§.", "ÎßàÏù¥ÌÅ¨ Ïª®Ìä∏Î°§ Îä•Î†•Ïù¥ Ï¢ãÏïÑ ÏÇ¨Ïö¥ÎìúÍ∞Ä ÏùºÏ†ïÌï©ÎãàÎã§.", "Í≤©Î†¨Ìïú ÏïàÎ¨¥ Ï§ëÏóêÎèÑ ÎùºÏù¥Î∏å ÏùåÏ†ïÏù¥ ÏïàÏ†ïÏ†ÅÏûÖÎãàÎã§.", "Ïª®ÎîîÏÖòÏóê Îî∞Î•∏ ÏùåÏÑ± Í¥ÄÎ¶¨Í∞Ä Ï≤†Ï†ÄÌï©ÎãàÎã§.", "Ï≤≠Ïùå Îä•Î†•Ïù¥ Ï¢ãÏïÑ ÏÉàÎ°úÏö¥ Î©úÎ°úÎîîÎ•º Í∏àÎ∞© ÏùµÌûôÎãàÎã§.", "ÏûêÏã†Ïùò ÏùåÏó≠ÎåÄÏôÄ Ïû•Ï†êÏùÑ Ï†ïÌôïÌûà ÌååÏïÖÌïòÍ≥† ÏûàÏäµÎãàÎã§.", "ÎèÑÏûÖÎ∂ÄÏóêÏÑú Í¥ÄÍ∞ùÏùò Í∑ÄÎ•º ÏÇ¨Î°úÏû°Îäî ÎßàÎ†•Ïù¥ ÏûàÏäµÎãàÎã§.", "Í≥°Ïùò ÌïòÏù¥ÎùºÏù¥Ìä∏Î•º ÌÑ∞Îú®Î¶¨Îäî Ìè≠Î∞úÎ†•Ïù¥ ÏûàÏäµÎãàÎã§.", "R&B, ÎùΩ, Ìä∏Î°úÌä∏ Îì± Îã§ÏñëÌïú Ïû•Î•¥ ÏÜåÌôîÎ†•Ïù¥ Ï¢ãÏäµÎãàÎã§.", "ÏΩîÎü¨Ïä§ ÎÖπÏùå Ïãú Î†àÏù¥Ïñ¥ÎßÅ Í∞êÍ∞ÅÏù¥ Îõ∞Ïñ¥ÎÇ©ÎãàÎã§.", "ÏùåÏïÖ Ïù¥Î°† ÏßÄÏãùÏùÑ Î∞îÌÉïÏúºÎ°ú ÏÑ†Ïú®ÏùÑ Ìï¥ÏÑùÌï©ÎãàÎã§.", "Î¨¥ÎåÄ ÏúÑÏóêÏÑú Ïó¨Ïú†Î°úÏö¥ ÏãúÏÑ† Ï≤òÎ¶¨ÏôÄ Îß§ÎÑàÎ•º Í∞ñÏ∑ÑÏäµÎãàÎã§.", "Îã§Î•∏ Î©§Î≤ÑÎì§Í≥ºÏùò Î™©ÏÜåÎ¶¨ Ìï©Ïù¥ Ï°∞ÌôîÎ°≠ÏäµÎãàÎã§.", "ÎÖπÏùåÏã§ ÎîîÎ†âÌåÖÏùÑ Îπ†Î•¥Í≤å Ïù¥Ìï¥ÌïòÍ≥† Ïã§ÌñâÌï©ÎãàÎã§.", "Í∞ÄÏÇ¨ ÏÜç ÌôîÏûêÏùò ÎßàÏùåÏùÑ Î∂ÑÏÑùÌï¥ Ïä§ÌÜ†Î¶¨ÌÖîÎßÅÏùÑ Ìï©ÎãàÎã§."
                ],
                axes: ['Í∏∞Î≥∏Í∏∞', 'Í≥†Ïùå/ÌååÏõå', 'ÌëúÌòÑÎ†•', 'ÎùºÏù¥Î∏åÏïàÏ†ïÏÑ±', 'ÏùåÏÉâ/Îß§Î†•', 'ÏùåÏïÖÏÑ±'],
                axisMap: [[0,1,2,19,25], [4,22,14], [10,11,12,29], [3,15,17,18,27], [5,6,9,21,23], [7,8,13,16,20,24,26,28]]
            },
            'Dance': {
                name: 'ÎåÑÏä§', engName: 'Dance',
                theme: 'bg-[#E0EEF5] text-[#6A9AB0] border-[#D0E3EF]',
                activeColor: '#6A9AB0', lightColor: '#F0F7FB',
                questions: [
                    "ÎèôÏûëÏùò Ï†ïÌôïÎèÑÍ∞Ä ÎÜíÏïÑ ÏïàÎ¨¥Ïùò Ï†ïÏÑùÏùÑ Î≥¥Ïó¨Ï§çÎãàÎã§.", "ÏïÑÏù¥ÏÜîÎ†àÏù¥ÏÖò(Ïã†Ï≤¥ Î∂ÑÎ¶¨) Îä•Î†•Ïù¥ ÌÉÅÏõîÌï©ÎãàÎã§.", "ÎèôÏûë ÏÇ¨Ïù¥Ïùò Ïó∞Í≤∞Ïù¥ Î∂ÄÎìúÎüΩÍ≥† Ïú†Ïó∞Ìï©ÎãàÎã§.", "ÌûòÏùò ÏôÑÍ∏â Ï°∞Ï†à(Í∞ïÏïΩ)Ïù¥ ÌôïÏã§Ìï¥ Ï∂§ÏÑ†Ïù¥ ÏòàÏÅ©ÎãàÎã§.", "Î∞ïÏûêÎ•º Ï™ºÍ∞úÏÑú ÏÇ¨Ïö©ÌïòÎäî ÎîîÌÖåÏùºÏù¥ Ï¢ãÏäµÎãàÎã§.", "Ï†êÌîÑÎÇò ÌÑ¥ Îì± Í≥†ÎÇúÎèÑ ÌÖåÌÅ¨ÎãâÏù¥ ÏïàÏ†ïÏ†ÅÏûÖÎãàÎã§.", "Ïñ¥Îñ§ Ïû•Î•¥Ïùò Ï∂§Ïù¥Îì† ÏäµÎìù ÏÜçÎèÑÍ∞Ä Îß§Ïö∞ Îπ†Î¶ÖÎãàÎã§.", "ÏûêÏã†Ïùò Ïã†Ï≤¥ Ï°∞Í±¥ÏùÑ ÌôúÏö©Ìï¥ Ï∂§ÏÑ†ÏùÑ Í∑πÎåÄÌôîÌï©ÎãàÎã§.", "Î¨¥ÎåÄ ÏúÑÏóêÏÑú ÎèôÏÑ† Ïù¥ÎèôÏù¥ Ï†ïÌôïÌïòÍ≥† ÏûêÏó∞Ïä§ÎüΩÏäµÎãàÎã§.", "Í≤©Î†¨Ìïú ÏïàÎ¨¥Î•º ÏÜåÌôîÌïòÎäî Ï≤¥Î†•Ïù¥ Îõ∞Ïñ¥ÎÇ©ÎãàÎã§.", "ÌëúÏ†ï Ïó∞Í∏∞Í∞Ä ÏïàÎ¨¥Ïùò Î∂ÑÏúÑÍ∏∞ÏôÄ ÏôÑÎ≤ΩÌûà ÏùºÏπòÌï©ÎãàÎã§.", "ÏÜêÎÅùÍ≥º Î∞úÎÅùÍπåÏßÄ ÏóêÎÑàÏßÄÍ∞Ä Ï†ÑÎã¨Îê©ÎãàÎã§.", "ÌîÑÎ¶¨Ïä§ÌÉÄÏùº ÎåÑÏä§ÏóêÏÑúÎèÑ ÎãπÌô©ÌïòÏßÄ ÏïäÍ≥† Ïã§Î†•ÏùÑ Î≥¥Ïó¨Ï§çÎãàÎã§.", "Íµ∞Î¨¥ Ïãú Ï£ºÎ≥Ä Î©§Î≤ÑÎì§Í≥ºÏùò Í∞ÑÍ≤©Í≥º Í∞ÅÎèÑÎ•º Ïûò ÎßûÏ∂•ÎãàÎã§.", "ÏÑºÌÑ∞ÏóêÏÑú Î¨¥ÎåÄÎ•º ÏïïÎèÑÌïòÎäî Ï°¥Ïû¨Í∞êÏù¥ Í∞ïÌï©ÎãàÎã§.", "ÏïàÎ¨¥Ïùò Ìè¨Ïù∏Ìä∏Î•º ÏÇ¥Î†§ÎÇ¥Îäî 'ÎÅº'Í∞Ä ÎÑòÏπ©ÎãàÎã§.", "ÌÑ¥ ÎèôÏûë ÌõÑ Ï§ëÏã¨ÏùÑ Ïû°Îäî ÏΩîÏñ¥ ÌûòÏù¥ Ï¢ãÏäµÎãàÎã§.", "ÌûôÌï©, ÌòÑÎåÄÎ¨¥Ïö©, ÌåùÌïÄ Îì± Ïû•Î•¥ Ïù¥Ìï¥ÎèÑÍ∞Ä ÎÜíÏäµÎãàÎã§.", "ÏïàÎ¨¥Í∞ÄÍ∞Ä ÏùòÎèÑÌïú Î¨¥Îìú(Mood)Î•º Ï†ïÌôïÌûà Íµ¨ÌòÑÌï©ÎãàÎã§.", "ÏÜåÌíàÏùÑ ÌôúÏö©Ìïú ÌçºÌè¨Î®ºÏä§Ïóê Îä•ÏàôÌï©ÎãàÎã§.", "Î¨¥ÎåÄ ÏÇ¨Í≥† Î∞úÏÉù Ïãú ÎåÄÏ≤ò Îä•Î†•Ïù¥ Ïú†Ïó∞Ìï©ÎãàÎã§.", "ÏûêÏã†ÎßåÏùò ÎèÖÏ∞ΩÏ†ÅÏù∏ Ï†úÏä§Ï≤òÎ•º ÏïàÎ¨¥Ïóê ÎÖπÏó¨ÎÉÖÎãàÎã§.", "Ïπ¥Î©îÎùº ÏïµÍ∏ÄÏùÑ ÌååÏïÖÌï¥ Í∞ÄÏû• ÏòàÏÅú Í∞ÅÎèÑÎ•º Ï∞æÏäµÎãàÎã§.", "Í∑∏Î£®Î∏åÍ∞Ä Î™∏Ïóê Î∞∞Ïñ¥ ÏûàÏñ¥ Í∞ÄÎßåÌûà ÏûàÏñ¥ÎèÑ Ï∂§ÏÑ†Ïù¥ ÎÇ©ÎãàÎã§.", "ÏïàÎ¨¥Î•º Ï∞ΩÏûëÌïòÍ±∞ÎÇò ÏàòÏ†ïÌïòÎäî Îä•Î†•Ïù¥ ÏûàÏäµÎãàÎã§.", "ÎèôÏûë ÌïòÎÇòÌïòÎÇòÏóê Ïã§Î¶¨Îäî Î¨¥Í≤åÍ∞êÏù¥ ÎöúÎ†∑Ìï©ÎãàÎã§.", "ÏùåÏïÖÏùò ÎπÑÌä∏Î•º Î™∏ÏúºÎ°ú ÏãúÍ∞ÅÌôîÌïòÎäî Îä•Î†•Ïù¥ Ï¢ãÏäµÎãàÎã§.", "ÏïàÎ¨¥Î•º Ïô∏Ïö∞Îäî Í∏∞ÏñµÎ†•Ïù¥ Îß§Ïö∞ Ï¢ãÏäµÎãàÎã§.", "ÌååÌä∏Í∞Ä ÏïÑÎãê ÎïåÎèÑ ÌçºÌè¨Î®ºÏä§ ÌùêÎ¶ÑÏùÑ Ïú†ÏßÄÌï©ÎãàÎã§.", "Ï†ÑÏã†ÏùÑ Ï°∞ÌôîÎ°≠Í≤å ÏÇ¨Ïö©ÌïòÎäî ÌòëÏùëÎ†•Ïù¥ Îõ∞Ïñ¥ÎÇ©ÎãàÎã§."
                ],
                axes: ['ÌååÏõå/ÏóêÎÑàÏßÄ', 'ÎîîÌÖåÏùº', 'ÌëúÌòÑ/ÌëúÏ†ï', 'Ïú†Ïó∞ÏÑ±', 'Íµ∞Î¨¥Ìï©', 'Ï∞ΩÏùòÏÑ±'],
                axisMap: [[0,9,14,16,25], [4,11,22,23,26], [10,15,18,21,28], [1,2,5,17,29], [3,8,13,20,27], [6,7,12,19,24]]
            },
            'Rap': {
                name: 'Îû©', engName: 'Rap',
                theme: 'bg-[#FFF2CC] text-[#B48A05] border-[#FFE599]',
                activeColor: '#D97706', lightColor: '#FFFBEB',
                questions: [
                    "ÎîïÏÖò(Î∞úÏùå)Ïù¥ Îß§Ïö∞ Ï†ïÌôïÌï¥ Îπ†Î•∏ Îû©ÎèÑ Ïûò Îì§Î¶ΩÎãàÎã§.", "Î∞ïÏûêÎ•º Î∞ÄÍ≥† ÎãπÍ∏∞Îäî ÌîåÎ°úÏö∞Í∞Ä Îã§Ï±ÑÎ°≠ÏäµÎãàÎã§.", "ÏûêÏã†ÎßåÏùò ÎèÖÎ≥¥Ï†ÅÏù∏ Î≥¥Ïù¥Ïä§ ÌÜ§ÏùÑ Í∞ÄÏ°åÏäµÎãàÎã§.", "Í∞ÄÏÇ¨ Ï†ÑÎã¨ Ïãú Í∞êÏ†ïÏùò Í≥†Ï°∞Î•º Ïûò ÌëúÌòÑÌï©ÎãàÎã§.", "ÎùºÏûÑ(Ïö¥Ïú®) Î∞∞ÏπòÍ∞Ä ÏÑ∏Î†®ÎêòÍ≥† Ï∞ΩÏùòÏ†ÅÏûÖÎãàÎã§.", "ÎπÑÌä∏Ïùò Î¨¥ÎìúÎ•º Ïù¥Ìï¥ÌïòÍ≥† Í∑∏ ÏúÑÏóê Ïûò Ïò¨ÎùºÌÉëÎãàÎã§.", "Î∞úÏÑ± Ï†ÑÎã¨Î†•Ïù¥ Ï¢ãÏïÑ Í∞ÄÏÇ¨Í∞Ä ÍΩÇÌûôÎãàÎã§.", "Í∞ÄÏÇ¨ ÏÜçÏóê Ïû¨Ïπò ÏûàÎäî ÌéÄÏπòÎùºÏù∏ÏùÑ Ïûò ÎÑ£ÏäµÎãàÎã§.", "ÏßÅÏ†ë Îû© Î©îÏù¥ÌÇπ(ÏûëÏÇ¨)ÏùÑ ÌïòÎäî Îä•Î†•Ïù¥ ÌÉÅÏõîÌï©ÎãàÎã§.", "Î¨¥ÎåÄ ÏúÑÏóêÏÑú ÏûêÏú†Î°úÏö¥ Ï†úÏä§Ï≤òÏôÄ Ïä§Ïõ®Í∑∏Í∞Ä ÏûàÏäµÎãàÎã§.", "Ïã±Ïûâ Îû©(Melodic Rap) ÏÜåÌôîÎ†•Ïù¥ Ï¢ãÏäµÎãàÎã§.", "Ìò∏Ìù° Î∞∞Î∂ÑÏù¥ ÏôÑÎ≤ΩÌï¥ Í∏¥ Î≤åÏä§ÎèÑ ÏïàÏ†ïÏ†ÅÏûÖÎãàÎã§.", "ÎπÑÌä∏ ÏóÜÏù¥ Îû©ÏùÑ Ìï¥ÎèÑ Î¶¨Îì¨Í∞êÏù¥ Ïú†ÏßÄÎê©ÎãàÎã§.", "ÎçîÎ∏îÎßÅÏù¥ÎÇò Ï∂îÏûÑÏÉà(Ad-lib) ÏÑºÏä§Í∞Ä Ï¢ãÏäµÎãàÎã§.", "Îã§ÏñëÌïú BPMÏùò Í≥°Ïóê Îπ†Î•¥Í≤å Ï†ÅÏùëÌï©ÎãàÎã§.", "Í∞ÄÏÇ¨ ÏïîÍ∏∞Î†•Ïù¥ Ï¢ãÏïÑ Ïã§ÏàòÌïòÎäî Î≤ïÏù¥ ÏóÜÏäµÎãàÎã§.", "Ï≤≠Ï§ëÏùÑ ÏÑ†ÎèôÌïòÍ≥† Ìò∏ÏùëÏùÑ Ïú†ÎèÑÌïòÎäî Îä•Î†•Ïù¥ ÌÅΩÎãàÎã§.", "Îû© Ï§ëÍ∞ÑÏ§ëÍ∞Ñ ÏÑûÎäî Ï∂îÏûÑÏÉàÍ∞Ä ÎπÑÌä∏ÏôÄ Ïûò Ïñ¥Ïö∏Î¶ΩÎãàÎã§.", "ÏûêÏã†Ïùò ÏÇ∂Ïù¥ÎÇò Í∞ÄÏπòÍ¥ÄÏùÑ Í∞ÄÏÇ¨Ïóê Ïûò ÎÖπÏó¨ÎÉÖÎãàÎã§.", "Î≥µÏû°Ìïú ÎπÑÌä∏ Íµ¨Ï°∞Î•º Îπ†Î•¥Í≤å Î∂ÑÏÑùÌï©ÎãàÎã§.", "ÏòÅÏñ¥ÎÇò Ïô∏Íµ≠Ïñ¥ Îû© Î∞úÏùåÏù¥ ÏûêÏó∞Ïä§ÎüΩÏäµÎãàÎã§.", "ÎùºÎîîÏò§ÎÇò ÎùºÏù¥Î∏åÏóêÏÑú Ï¶âÌù• Îû© Ïã§Î†•Ïù¥ Ï¢ãÏäµÎãàÎã§.", "ÎÖπÏùå Ïãú ÌÜ§Ïùò ÏùºÍ¥ÄÏÑ±ÏùÑ Ïûò Ïú†ÏßÄÌï©ÎãàÎã§.", "Îã§Î•∏ ÎûòÌçºÏôÄÏùò Î≤åÏä§ ÍµêÏ∞®(Interaction)Í∞Ä Îß§ÎÅÑÎüΩÏäµÎãàÎã§.", "ÏÑ±ÎüâÏù¥ ÌÅ¨Í≥† ÏÜåÎ¶¨Í∞Ä Îã®Îã®ÌïòÍ≤å ÎÇòÏòµÎãàÎã§.", "Ìä∏Î†åÎîîÌïú Îû© Ïä§ÌÉÄÏùºÏùÑ Îπ†Î•¥Í≤å ÏàòÏö©Ìï©ÎãàÎã§.", "Í∞ÄÏÇ¨Ïùò Ïä§ÌÜ†Î¶¨ÌÖîÎßÅ Íµ¨ÏÑ± Îä•Î†•Ïù¥ Îõ∞Ïñ¥ÎÇ©ÎãàÎã§.", "ÎßàÏù¥ÌÅ¨ Ïû°Îäî Î≤ïÍ≥º Í±∞Î¶¨ Ï°∞Ï†àÏù¥ Îä•ÏàôÌï©ÎãàÎã§.", "Í∏¥Ïû•ÌïòÏßÄ ÏïäÍ≥† Î¨¥ÎåÄ ÏúÑÏóêÏÑú Ïó¨Ïú†Î•º Î∂ÄÎ¶ΩÎãàÎã§.", "Í≥°Ïùò Í∏¥Ïû•Í∞êÏùÑ Ï°∞ÏÑ±ÌïòÎäî ÌÖêÏÖò Ï°∞Ï†à Îä•Î†•Ïù¥ Ï¢ãÏäµÎãàÎã§."
                ],
                axes: ['ÎîïÏÖò/Ï†ÑÎã¨', 'ÌîåÎ°úÏö∞', 'ÏûëÏÇ¨/ÎùºÏûÑ', 'Ïä§Ïõ®Í∑∏', 'Ìò∏Ìù°/ÏïàÏ†ïÏÑ±', 'ÏÑºÏä§'],
                axisMap: [[0,6,20,24,27], [1,5,12,14,25], [4,8,18,19,26], [2,9,10,16,28], [11,15,22,29], [3,7,13,17,21,23]]
            },
            'Visual': {
                name: 'ÎπÑÏ£ºÏñº', engName: 'Visual',
                theme: 'bg-[#F0FDF4] text-[#60A376] border-[#DCFCE7]',
                activeColor: '#82C49A', lightColor: '#F0FDF4',
                questions: [
                    "Ïπ¥Î©îÎùº ÏÖîÌÑ∞ ÏÜåÎ¶¨Ïóê ÎßûÏ∂∞ Îã§ÏñëÌïú Ìè¨Ï¶àÎ•º Ï∑®Ìï©ÎãàÎã§.", "ÌëúÏ†ï Î≥ÄÌôîÍ∞Ä ÌíçÎ∂ÄÌï¥ Ïª®ÏÖâÏóê ÎßûÎäî ÏñºÍµ¥ÏùÑ ÎßåÎì≠ÎãàÎã§.", "ÏûêÏã†Ïùò Ïô∏Î™® Ï§ë Í∞ÄÏû• Îß§Î†•Ï†ÅÏù∏ Ìè¨Ïù∏Ìä∏Î•º ÏïïÎãàÎã§.", "Ïñ¥Îñ§ ÏùòÏÉÅÏù¥Îì† ÏÜåÌôîÌï¥ÎÇ¥Îäî Îä•Î†•Ïù¥ Îõ∞Ïñ¥ÎÇ©ÎãàÎã§.", "Î¨¥ÎåÄ ÏúÑÏóêÏÑú ÏúôÌÅ¨ÎÇò ÎØ∏ÏÜå Îì± Ìå¨ÏÑúÎπÑÏä§Í∞Ä ÏûêÏó∞Ïä§ÎüΩÏäµÎãàÎã§.", "Ïπ¥Î©îÎùºÎ•º Ï∞æÎäî Îàà(Camera Work)Ïù¥ ÏòàÎ¶¨Ìï©ÎãàÎã§.", "Ï†ÑÏ≤¥Ï†ÅÏù∏ Ïã†Ï≤¥ ÎπÑÏú®Í≥º ÎùºÏù∏Ïù¥ ÏïÑÎ¶ÑÎãµÏäµÎãàÎã§.", "ÏûêÏã†ÎßåÏùò ÎèÖÎ≥¥Ï†ÅÏù∏ Î∂ÑÏúÑÍ∏∞(Aura)Î•º ÌíçÍπÅÎãàÎã§.", "ÌôîÎ≥¥ Ï¥¨ÏòÅ Ïãú ÎîîÎ†âÏÖò ÏóÜÏù¥ÎèÑ AÏª∑ÏùÑ ÎßåÎì§Ïñ¥ÎÉÖÎãàÎã§.", "Ìó§Ïñ¥ÏôÄ Î©îÏù¥ÌÅ¨ÏóÖ Î≥ÄÌôîÏóê Îî∞Îùº Ïù¥ÎØ∏ÏßÄÍ∞Ä Ìôï Îã¨ÎùºÏßëÎãàÎã§.", "Î¨¥ÎåÄ ÏúÑ ÏóîÎî© ÏöîÏ†ïÏúºÎ°úÏÑú ÏûÑÌå©Ìä∏Í∞Ä Í∞ïÌï©ÎãàÎã§.", "Í¥ëÍ≥†Ï£ºÎÇò Î∏åÎûúÎìúÍ∞Ä ÏÑ†Ìò∏ÌïòÎäî Í≥†Í∏âÏä§Îü¨Ïö¥ Ïù¥ÎØ∏ÏßÄÍ∞Ä ÏûàÏäµÎãàÎã§.", "ÎåÄÏ§ëÎì§ÏóêÍ≤å Ìò∏Í∞êÏùÑ Ï£ºÎäî Ïù∏ÏÉÅÏùÑ Í∞ÄÏ°åÏäµÎãàÎã§.", "Ïó∞Í∏∞Î†•Ïù¥ Ï¢ãÏïÑ ÎÆ§ÏßÅÎπÑÎîîÏò§ÏóêÏÑú Î™∞ÏûÖÍ∞êÏùÑ Ï§çÎãàÎã§.", "ÏùºÏÉÅ ÏÇ¨ÏßÑ(ÎÇ®ÏπúÏß§/Ïó¨ÏπúÏß§) Ï†úÏ°∞ Îä•Î†•Ïù¥ Ï¢ãÏäµÎãàÎã§.", "Îã§ÏñëÌïú Ïª®ÏÖâ(Ï≤≠Îüâ, Îã§ÌÅ¨, Î™ΩÌôò Îì±) ÏÜåÌôîÎ†•Ïù¥ ÎÜíÏäµÎãàÎã§.", "Î¨¥ÎåÄ ÏïÑÎûòÏóêÏÑúÎèÑ Ïó∞ÏòàÏù∏ Ìè¨Ïä§Í∞Ä ÎäêÍª¥ÏßëÎãàÎã§.", "ÏûêÏã†ÏóêÍ≤å Ïñ¥Ïö∏Î¶¨Îäî Ïä§ÌÉÄÏùºÎßÅÏùÑ Ï†úÏïàÌï† Ï§Ñ ÏïïÎãàÎã§.", "Ìè¨ÌÜ†Ï†úÎãâÌïòÎ©∞ ÌõÑÎ≥¥Ï†ï ÏóÜÏù¥ÎèÑ Í≤∞Í≥ºÎ¨ºÏù¥ ÌõåÎ•≠Ìï©ÎãàÎã§.", "Ìå¨Îì§Í≥ºÏùò ÏÜåÌÜµ Ïãú Îã§Ï†ïÌïú ÌëúÏ†ïÍ≥º ÎààÎπõÏùÑ Î≥¥ÎÉÖÎãàÎã§.", "ÏõÉÏùÑ ÎïåÏôÄ Î¨¥ÌëúÏ†ïÏùº ÎïåÏùò Í∞≠ Ï∞®Ïù¥Í∞Ä Îß§Î†•Ï†ÅÏûÖÎãàÎã§.", "ÌîºÎ∂ÄÏôÄ Ïù¥Î™©Íµ¨ÎπÑÏùò Í¥ÄÎ¶¨Í∞Ä Ï≤†Ï†ÄÌï©ÎãàÎã§.", "ÏûëÏùÄ Ï†úÏä§Ï≤ò ÌïòÎÇòÎ°ú ÏÑúÏÇ¨Î•º ÎßåÎì§Ïñ¥ÎÉÖÎãàÎã§.", "Îü∞Ïõ®Ïù¥ÎÇò ÌôîÎ≥¥ÏóêÏÑú Ï†ÑÎ¨∏ Î™®Îç∏ Í∞ôÏùÄ Ìè¨Ï¶àÎ•º Ï∑®Ìï©ÎãàÎã§.", "ÏãúÍ∞ÅÏ†ÅÏù∏ Í∑†ÌòïÎØ∏Í∞Ä Îõ∞Ïñ¥ÎÇ©ÎãàÎã§.", "Ï≤≠Ï§ëÏùò ÏãúÏÑ†ÏùÑ Îã®Ïà®Ïóê Î∫èÎäî ÏïïÎèÑÏ†Å ÎπÑÏ£ºÏñºÏûÖÎãàÎã§.", "Î∂ÑÏúÑÍ∏∞ Î©îÏù¥Ïª§Î°úÏÑú Î¨¥ÎåÄ Î¨¥ÎìúÎ•º Ï£ºÎèÑÌï©ÎãàÎã§.", "ÏûêÏã†Ïùò Îß§Î†•ÏùÑ ÏòÅÏÉÅÏóê Îã¥Îäî ÏÖÄÏπ¥ Îä•Î†•Ïù¥ Ï¢ãÏäµÎãàÎã§.", "Ìä∏Î†åÎîîÌïú Ïô∏Î™®Î•º Ïú†ÏßÄÌïòÍ∏∞ ÏúÑÌï¥ ÎÖ∏Î†•Ìï©ÎãàÎã§.", "Í∑∏Î£πÏùò Ïù¥ÎØ∏ÏßÄÎ•º ÎåÄÌëúÌïòÎäî ÏÑºÌÑ∞Îã§Ïö¥ Î©¥Î™®Í∞Ä ÏûàÏäµÎãàÎã§."
                ],
                axes: ['Ìè¨ÌÜ†Ï†úÎãâ', 'ÌëúÏ†ï/Ïó∞Í∏∞', 'Ïª®ÏÖâÏÜåÌôîÎ†•', 'Îß§Î†•ÏßÄÏàò', 'Ìå¨ÏÑúÎπÑÏä§', 'ÏïÑÏö∞Îùº'],
                axisMap: [[0,8,18,23,27], [1,13,20,22,26], [3,9,15,17,28], [2,6,12,14,21], [4,10,19,29], [5,7,11,16,24,25]]
            },
            'Allrounder': {
                name: 'Ïò¨ÎùºÏö¥Îçî', engName: 'All-rounder',
                theme: 'bg-[#E5DFF5] text-[#8A79B3] border-[#DCD3F0]',
                activeColor: '#8A79B3', lightColor: '#F5F2FC',
                questions: [
                    "ÌåÄ ÎÇ¥ÏóêÏÑú Î≥¥Ïª¨Í≥º Îû© Ìè¨ÏßÄÏÖòÏùÑ Î™®Îëê ÌõåÎ•≠ÌïòÍ≤å ÏÜåÌôîÌï©ÎãàÎã§.", "Ïñ¥Îñ§ Í≥°ÏóêÏÑúÎèÑ ÌùîÎì§Î¶¨ÏßÄ ÏïäÎäî ÎùºÏù¥Î∏å Ïã§Î†•ÏùÑ Í∞ñÏ∑ÑÏäµÎãàÎã§.", "Í≤©Î†¨Ìïú ÏïàÎ¨¥ ÎèÑÏ§ëÏóêÎèÑ Î≥¥Ïª¨/Îû©Ïùò ÌÄÑÎ¶¨Ìã∞Í∞Ä ÏùºÏ†ïÌï©ÎãàÎã§.", "ÏïàÎ¨¥ ÏäµÎìù Îä•Î†•Ïù¥ Îõ∞Ïñ¥ÎÇòÎ©∞ Ï∂§ÏÑ†Ïù¥ Îß§Ïö∞ Ï†ïÍµêÌï©ÎãàÎã§.", "ÏûêÏã†ÎßåÏùò ÎèÖÎ≥¥Ï†ÅÏù∏ ÏùåÏÉâÍ≥º Î∞úÏÑ±ÏùÑ Î≥¥Ïú†ÌïòÍ≥† ÏûàÏäµÎãàÎã§.", "Í≥°Ïùò Î∂ÑÏúÑÍ∏∞Ïóê ÎßûÏ∂∞ Ï∞ΩÎ≤ïÍ≥º ÌÜ§ÏùÑ Ïú†Ïó∞ÌïòÍ≤å Î∞îÍøâÎãàÎã§.", "Î¨¥ÎåÄ ÏúÑÏóêÏÑú ÏãúÏÑ† Ï≤òÎ¶¨ÏôÄ Ï†úÏä§Ï≤òÍ∞Ä Îß§Ïö∞ Îä•ÏàôÌï©ÎãàÎã§.", "Ïπ¥Î©îÎùº ÏõåÌÇπÏùÑ ÏôÑÎ≤ΩÌûà Ïù¥Ìï¥ÌïòÍ≥† ÏóîÎî© ÏöîÏ†ï Ïó≠Ìï†ÏùÑ Ïûò ÏàòÌñâÌï©ÎãàÎã§.", "Îã§ÏñëÌïú Ïª®ÏÖâ(ÏÑπÏãú, Ï≤≠Îüâ, ÌûôÌï© Îì±)ÏùÑ Ïù¥ÏßàÍ∞ê ÏóÜÏù¥ ÏÜåÌôîÌï©ÎãàÎã§.", "Î¨¥ÎåÄ ÏúÑÏóêÏÑú 'Ï≤úÏû¨ ÏïÑÏù¥Îèå'Îã§Ïö¥ ÏïïÎèÑÏ†Å ÏïÑÏö∞ÎùºÎ•º ÌíçÍπÅÎãàÎã§.", "ÌëúÏ†ï Ïó∞Í∏∞Í∞Ä ÌíçÎ∂ÄÌïòÏó¨ Î¨¥ÎåÄÏùò Î™∞ÏûÖÎèÑÎ•º Í∑πÎåÄÌôîÌï©ÎãàÎã§.", "Í≥° Í∏∞ÌöçÏù¥ÎÇò ÏïàÎ¨¥ Ï∞ΩÏûëÏóê Î≥∏Ïù∏Ïùò ÏùòÍ≤¨ÏùÑ Ï†ÅÍ∑π Î∞òÏòÅÌï©ÎãàÎã§.", "Îû© Î≤åÏä§ Î©îÏù¥ÌÇπÏù¥ÎÇò ÏûëÏÇ¨ Îä•Î†•ÏùÑ Í∞ñÏ∂îÍ≥† ÏûàÏäµÎãàÎã§.", "ÎπÑÏ£ºÏñºÏ†ÅÏúºÎ°ú Í∑∏Î£πÏùò Ï§ëÏã¨(Center) Ïó≠Ìï†ÏùÑ ÏàòÌñâÌïòÍ∏∞Ïóê Ï∂©Î∂ÑÌï©ÎãàÎã§.", "Ìå¨Îì§Í≥ºÏùò ÏÜåÌÜµ Îä•Î†•Ïù¥ Ï¢ãÏúºÎ©∞ Î¨¥ÎåÄ Î∞ñÏóêÏÑúÎèÑ Îß§Î†•Ïù¥ ÎÑòÏπ©ÎãàÎã§.", "ÎèåÎ∞ú ÏÉÅÌô©(ÏùåÌñ• ÏÇ¨Í≥† Îì±)ÏóêÎèÑ ÎãπÌô©ÌïòÏßÄ ÏïäÍ≥† ÎåÄÏ≤òÌï©ÎãàÎã§.", "ÎèÑÏûÖÎ∂ÄÎÇò ÌïòÏù¥ÎùºÏù¥Ìä∏ Îì± Í≥°Ïùò ÌïµÏã¨ ÌååÌä∏Î•º Ï±ÖÏûÑÏßà Ïàò ÏûàÏäµÎãàÎã§.", "ÌôîÏùå ÏåìÍ∏∞ÎÇò ÏΩîÎü¨Ïä§ Îì± ÏùåÏïÖÏ†Å ÏÑúÌè¨Ìä∏ Îä•Î†•ÎèÑ Îõ∞Ïñ¥ÎÇ©ÎãàÎã§.", "ÎåÑÏä§ Î∏åÎ†àÏù¥ÌÅ¨Ïùò Ï§ëÏã¨ÏóêÏÑú ÌåÄÏùò ÌçºÌè¨Î®ºÏä§Î•º Ïù¥ÎÅå Ïàò ÏûàÏäµÎãàÎã§.", "Î≥∏Ïù∏ÎßåÏùò ÏãúÍ∑∏ÎãàÏ≤ò Ï†úÏä§Ï≤òÎÇò ÌÇ¨ÎßÅ Ìè¨Ïù∏Ìä∏Î•º Ïûò ÎßåÎì≠ÎãàÎã§.", "ÎßàÏù¥ÌÅ¨ Ïª®Ìä∏Î°§Í≥º ÏÜåÌíà ÌôúÏö© Îä•Î†•Ïù¥ ÏÑ∏Î†®ÎêòÏóàÏäµÎãàÎã§.", "Ï£ºÎ≥Ä Î©§Î≤ÑÎì§Ïùò Ïã§Î†•ÏùÑ Î∂ÅÎèãÏïÑÏ£ºÎäî ÏùåÏïÖÏ†Å ÏÑºÏä§Í∞Ä ÏûàÏäµÎãàÎã§.", "Ï≤¥Î†•Ïù¥ Ï¢ãÏïÑ Í≥µÏó∞ ÎÇ¥ÎÇ¥ ÏóêÎÑàÏßÄÎ•º ÎÅùÍπåÏßÄ Ïú†ÏßÄÌï©ÎãàÎã§.", "Ï†ÑÎã¨Î†•(ÎîïÏÖò)Ïù¥ Ï¢ãÏïÑ Í∞ÄÏÇ¨Ïùò Î©îÏãúÏßÄÍ∞Ä Ïûò Îì§Î¶ΩÎãàÎã§.", "Ïú†Ïó∞ÏÑ±Í≥º ÏΩîÏñ¥ ÌûòÏù¥ Ï¢ãÏïÑ Í≥†ÎÇúÎèÑ ÌçºÌè¨Î®ºÏä§Í∞Ä Í∞ÄÎä•Ìï©ÎãàÎã§.", "Ìä∏Î†åÎîîÌïú Ïä§ÌÉÄÏùºÎßÅÏùÑ Î≥∏Ïù∏ÏóêÍ≤å ÎßûÍ≤å Ïûò Ï†úÏïàÌï©ÎãàÎã§.", "ÌîÑÎ°úÎìÄÏã±Ïù¥ÎÇò Ìé∏Í≥° Îì± Í∏∞Ïà†Ï†ÅÏù∏ ÏùåÏïÖ Ïù¥Ìï¥ÎèÑÍ∞Ä ÎÜíÏäµÎãàÎã§.", "Ïñ¥Îñ§ Ïû•Î•¥Ïùò ÎπÑÌä∏Îì† Î≥∏Ïù∏ÎßåÏùò Í∑∏Î£®Î∏åÎ°ú ÌÉÄÎÉÖÎãàÎã§.", "Í¥ÄÍ∞ùÏùò Ìò∏ÏùëÏùÑ Ïú†ÎèÑÌïòÍ≥† Î¨¥ÎåÄÎ•º Ïû•ÏïÖÌïòÎäî ÌûòÏù¥ ÌÅΩÎãàÎã§.", "Í∑∏Î£π Ï†ÑÏ≤¥Ïùò Î∞∏Îü∞Ïä§Î•º Ïû°ÏïÑÏ£ºÎäî ÌïµÏã¨ Î©§Î≤ÑÏùò Î©¥Î™®Í∞Ä ÏûàÏäµÎãàÎã§."
                ],
                axes: ['Î≥¥Ïª¨/Îû©', 'ÌçºÌè¨Î®ºÏä§', 'ÌëúÌòÑÎ†•', 'Î∞∏Îü∞Ïä§/ÏÑºÌÑ∞', 'ÎùºÏù¥Î∏åÏïàÏ†ïÏÑ±', 'ÏùåÏïÖÏÑ±/ÏÑºÏä§'],
                axisMap: [[0,4,17,23,27], [3,18,20,22,24], [6,8,10,11,19], [13,8,14,25,29], [1,2,5,15,16], [12,7,21,26,28]]
            }
        };

        const sessionIcons = {
            'Vocal': 'üé§', 'Dance': 'üíÉ', 'Rap': 'üî•', 'Visual': '‚ú®', 'Allrounder': 'üåü'
        };

        const appElement = document.getElementById('app');

        function renderApp() {
            appElement.innerHTML = '';
            
            if (currentState === APP_STATE.SESSION_SELECT) {
                renderSessionSelect();
            } else if (currentState === APP_STATE.TEST_IN_PROGRESS) {
                renderTestInProgress();
            } else if (currentState === APP_STATE.RESULT_VIEW) {
                renderResultView();
                setTimeout(() => {
                    const data = sessionData[currentSession];
                    const stats = calculateStats(currentAnswers);
                    drawRadarChart('radar-chart', stats, data.axes, data.activeColor, data.lightColor);
                }, 50);
            }
        }

        function renderSessionSelect() {
            const content = `
                <div class="h-full flex flex-col p-6 bg-[#FFFFFF]">
                    <div class="flex-none mb-6">
                        <div class="flex items-center mb-4">
                            <span class="p-2 rounded-full bg-[#F3F4F6] text-[#6B7280]">
                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5"/><path d="M2 12l10 5 10-5"/></svg>
                            </span>
                            <span class="ml-2 font-bold text-[#9CA3AF] text-sm tracking-wider uppercase">Idol Analysis</span>
                        </div>
                        <h1 class="text-3xl font-extrabold text-[#111827] leading-tight word-keep-all">
                            Î∂ÑÏÑùÌïòÍ≥† Ïã∂ÏùÄ<br>Ìè¨ÏßÄÏÖòÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî
                        </h1>
                    </div>

                    <div class="flex-1 grid grid-cols-2 grid-rows-3 gap-3 min-h-0">
                        <button onclick="startTest('Vocal')" class="col-span-1 row-span-1 bento-item relative rounded-3xl bg-[#FDE2E2] text-[#D66B6B] p-5 flex flex-col items-start justify-start group border-2 border-transparent">
                             <div class="flex flex-col items-start z-10">
                                <span class="block font-extrabold text-xl">Î≥¥Ïª¨</span>
                                <span class="block text-sm font-semibold opacity-70">Vocal</span>
                             </div>
                             <div class="text-4xl absolute bottom-3 right-3 opacity-80 transform group-hover:scale-105 transition-transform duration-300">üé§</div>
                        </button>

                        <button onclick="startTest('Dance')" class="col-span-1 row-span-1 bento-item relative rounded-3xl bg-[#E0EEF5] text-[#6A9AB0] p-5 flex flex-col items-start justify-start group border-2 border-transparent">
                             <div class="flex flex-col items-start z-10">
                                <span class="block font-extrabold text-xl">ÎåÑÏä§</span>
                                <span class="block text-sm font-semibold opacity-70">Dance</span>
                             </div>
                             <div class="text-4xl absolute bottom-3 right-3 opacity-80 transform group-hover:scale-105 transition-transform duration-300">üíÉ</div>
                        </button>

                        <button onclick="startTest('Rap')" class="col-span-1 row-span-1 bento-item relative rounded-3xl bg-[#FFF2CC] text-[#B48A05] p-5 flex flex-col items-start justify-start group border-2 border-transparent">
                             <div class="flex flex-col items-start z-10">
                                <span class="block font-extrabold text-xl">Îû©</span>
                                <span class="block text-sm font-semibold opacity-70">Rap</span>
                             </div>
                             <div class="text-4xl absolute bottom-3 right-3 opacity-80 transform group-hover:scale-105 transition-transform duration-300">üî•</div>
                        </button>

                        <button onclick="startTest('Visual')" class="col-span-1 row-span-1 bento-item relative rounded-3xl bg-[#F0FDF4] text-[#60A376] p-5 flex flex-col items-start justify-start group border-2 border-transparent">
                             <div class="flex flex-col items-start z-10">
                                <span class="block font-extrabold text-xl">ÎπÑÏ£ºÏñº</span>
                                <span class="block text-sm font-semibold opacity-70">Visual</span>
                             </div>
                             <div class="text-4xl absolute bottom-3 right-3 opacity-80 transform group-hover:scale-105 transition-transform duration-300">‚ú®</div>
                        </button>

                        <button onclick="startTest('Allrounder')" class="col-span-2 row-span-1 bento-item relative rounded-3xl bg-[#E5DFF5] text-[#8A79B3] p-6 flex flex-col items-start justify-start group border-2 border-transparent overflow-hidden">
                            <div class="flex flex-col items-start z-10">
                                <span class="font-extrabold text-2xl sm:text-3xl">Ïò¨ÎùºÏö¥Îçî</span>
                                <span class="text-sm font-semibold opacity-80 mt-1">All-rounder</span>
                            </div>
                            <div class="text-4xl absolute bottom-3 right-3 opacity-80 transform group-hover:scale-105 transition-transform duration-300">üåü</div>
                        </button>
                    </div>
                </div>
            `;
            appElement.innerHTML = content;
        }

        function renderTestInProgress() {
            const data = sessionData[currentSession];
            const totalQ = data.questions.length;
            const currentQText = data.questions[currentQuestionIndex];
            const progress = ((currentQuestionIndex + 1) / totalQ) * 100;
            const isFirstQuestion = currentQuestionIndex === 0;

            const scales = [
                { val: 1, label: 'Ï†ÑÌòÄ ÏïÑÎãò' },
                { val: 2, label: 'ÏïÑÎãò' },
                { val: 3, label: 'Î≥¥ÌÜµ' },
                { val: 4, label: 'Í∑∏Î†áÎã§' },
                { val: 5, label: 'Îß§Ïö∞ Í∑∏Î†áÎã§' }
            ];

            const content = `
                <div class="flex flex-col h-full bg-[#F9FAFB] relative">
                    <div class="flex-none px-6 py-5 flex items-center justify-between bg-white z-10 border-b border-[#F3F4F6]">
                        <button onclick="goBack()" ${isFirstQuestion ? 'disabled' : ''} class="p-2 -ml-2 rounded-full hover:bg-[#F3F4F6] text-[#374151] ${isFirstQuestion ? 'opacity-30 cursor-not-allowed' : ''}">
                             <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5"/><path d="M12 19l-7-7 7-7"/></svg>
                        </button>
                        <div class="flex flex-col items-center">
                            <span class="font-bold text-lg text-[#111827] leading-none">${data.name} Ìè¨ÏßÄÏÖò</span>
                            <span class="text-xs text-[#9CA3AF] font-medium mt-1">${currentQuestionIndex + 1} / ${totalQ}</span>
                        </div>
                        <button onclick="goHome()" class="p-2 -mr-2 rounded-full hover:bg-[#F3F4F6] text-[#374151]">
                            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                        </button>
                    </div>

                    <div class="flex-none w-full h-1 bg-[#F3F4F6]">
                        <div class="h-full progress-bar-inner" style="width: ${progress}%; background-color: ${data.activeColor};"></div>
                    </div>

                    <div class="flex-1 overflow-y-auto no-scrollbar p-6 pb-20 flex flex-col">
                        <div class="flex-none bg-white rounded-[2rem] p-8 shadow-sm border border-[#E5E7EB] mb-6 min-h-[160px] flex flex-col justify-center items-center text-center">
                            <span class="inline-block px-3 py-1 rounded-full ${data.theme} text-xs font-bold mb-3">
                                Question ${currentQuestionIndex + 1}
                            </span>
                            <p class="text-xl sm:text-2xl font-bold text-[#111827] leading-snug word-keep-all">
                                ${currentQText}
                            </p>
                        </div>

                        <div class="flex-1 flex flex-col justify-center space-y-3">
                            ${scales.map((item) => `
                                <button onclick="recordAnswer(${item.val}, this)" 
                                    data-active-bg="${data.activeColor}"
                                    class="w-full py-3.5 px-6 rounded-2xl border-2 flex items-center justify-between transition-all duration-200 scale-btn group bg-white text-[#4B5563] border-[#E5E7EB]">
                                    <span class="text-sm font-bold opacity-80 group-active:text-white">${item.label}</span>
                                    <span class="text-lg font-black font-mono group-active:text-white">${item.val}</span>
                                </button>
                            `).join('')}
                        </div>
                    </div>
                </div>
            `;
            appElement.innerHTML = content;
        }

        function renderResultView() {
            const data = sessionData[currentSession];
            const stats = calculateStats(currentAnswers);
            const themeColor = data.activeColor;
            
            const axisElements = data.axes.map((axisName, index) => {
                const score = stats.scores[index];
                const scorePercent = score.toFixed(0);
                return `
                    <div class="flex flex-col py-2">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-xs font-semibold text-[#4B5563]">${axisName}</span>
                            <span class="text-xs font-extrabold" style="color: ${themeColor};">${scorePercent}</span>
                        </div>
                        <div class="h-2 w-full rounded-full bg-[#F3F4F6] overflow-hidden">
                            <div class="h-full rounded-full" style="background-color: ${themeColor}; width: ${scorePercent}%"></div>
                        </div>
                    </div>
                `;
            }).join('');
            
            const content = `
                <div class="h-full flex flex-col bg-[#F9FAFB] overflow-hidden">
                    <div class="flex-none px-6 py-5 flex justify-between items-center bg-white border-b border-[#F3F4F6] z-10">
                        <h1 class="text-xl font-extrabold text-[#111827]">ÏïÑÏù¥Îèå Îä•Î†•Ïπò Î¶¨Ìè¨Ìä∏</h1>
                        <button onclick="exportResultAsImage()" class="flex items-center gap-1.5 px-3 py-1.5 rounded-full bg-[#F3F4F6] text-xs font-bold text-[#4B5563] hover:bg-[#E5E7EB] transition">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                            Ïù¥ÎØ∏ÏßÄ Ï†ÄÏû•
                        </button>
                    </div>

                    <div class="flex-1 overflow-y-auto no-scrollbar bg-[#F9FAFB] relative">
                        <div id="result-capture-area" class="px-6 py-6 pb-24 bg-[#F9FAFB] min-h-full">
                            
                            <div class="bg-white rounded-[2rem] p-5 shadow-sm border border-[#E5E7EB] mb-4 flex items-center gap-4">
                                <div class="relative w-24 h-24 flex-shrink-0 cursor-pointer group" onclick="triggerFileInput()">
                                    <input type="file" id="image-upload" accept="image/*" class="hidden" onchange="handleFileSelect(event)">
                                    <div id="char-image-display" class="w-full h-full rounded-full overflow-hidden border-2 border-[#F3F4F6] bg-[#F3F4F6] flex items-center justify-center text-3xl">
                                        ${characterImage 
                                            ? `<img src="${characterImage}" class="w-full h-full object-cover">` 
                                            : `${sessionIcons[currentSession]}`}
                                    </div>
                                    <div class="absolute inset-0 rounded-full bg-[#111827] bg-opacity-0 group-hover:bg-opacity-20 flex items-center justify-center transition duration-300">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-white opacity-0 group-hover:opacity-100" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 20h9"/><path d="M16.5 3.5l-3.5 3.5 6 6 3.5-3.5z"/><path d="M19 14l-6 6"/><path d="M8 8H5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-3"/></svg>
                                    </div>
                                </div>
                                <div class="flex-1">
                                    <div class="flex items-center gap-2 mb-1">
                                        <span class="text-xl font-extrabold text-[#111827]" id="char-name-display" contenteditable="true" onblur="characterName = this.innerText">${characterName}</span>
                                        <span class="inline-block px-3 py-0.5 rounded-full text-xs font-bold align-middle leading-tight" style="color: ${themeColor}; background-color: ${data.lightColor};">${data.name}</span>
                                    </div>
                                    <p class="text-sm text-[#9CA3AF] word-keep-all" id="char-catchphrase-display" contenteditable="true" onblur="catchphrase = this.innerText">${catchphrase}</p>
                                </div>
                            </div>

                            <div class="bg-white rounded-[2rem] p-5 shadow-sm border border-[#E5E7EB] mb-4">
                                <h2 class="text-lg font-extrabold text-[#111827] mb-4 border-b pb-2 border-[#F3F4F6]">Ìè¨ÏßÄÏÖò Î∞∏Îü∞Ïä§ Î∂ÑÏÑù</h2>
                                <canvas id="radar-chart" width="320" height="320" class="mx-auto"></canvas>
                            </div>

                            <div class="bg-white rounded-[2rem] p-5 shadow-sm border border-[#E5E7EB]">
                                <h2 class="text-lg font-extrabold text-[#111827] mb-2 border-b pb-2 border-[#F3F4F6]">ÏÉÅÏÑ∏ Îä•Î†•Ïπò Ïä§ÏΩîÏñ¥</h2>
                                ${axisElements}
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex-none p-4 bg-white border-t border-[#F3F4F6] absolute bottom-0 w-full">
                         <button onclick="goHome()" class="w-full py-3 rounded-2xl bg-[#111827] text-white font-bold text-lg scale-btn shadow-lg">
                            ÏÉà Ìè¨ÏßÄÏÖò ÌÖåÏä§Ìä∏ÌïòÍ∏∞
                        </button>
                    </div>
                </div>
            `;
            appElement.innerHTML = content;
        }

        function startTest(sessionKey) {
            currentSession = sessionKey;
            currentState = APP_STATE.TEST_IN_PROGRESS;
            currentQuestionIndex = 0; 
            currentAnswers = []; 
            characterImage = null;
            characterName = "ÏïÑÏù¥Îèå Î©§Î≤Ñ";
            catchphrase = "ÏÑ∏ÏÉÅÏóêÏÑú Í∞ÄÏû• ÎπõÎÇòÎäî Î≥ÑÏù¥ Îê†Í≤åÏöî!";
            renderApp();
        }
        
        function goBack() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderApp();
            } else {
                goHome();
            }
        }
        
        function goHome() {
            currentState = APP_STATE.SESSION_SELECT;
            currentSession = null;
            currentQuestionIndex = 0;
            currentAnswers = [];
            renderApp();
        }

        function recordAnswer(score, element) {
            const activeColor = element.getAttribute('data-active-bg');
            element.style.backgroundColor = activeColor;
            element.style.borderColor = activeColor;
            element.querySelectorAll('span').forEach(s => s.style.color = 'white');

            currentAnswers[currentQuestionIndex] = score;
            
            setTimeout(() => {
                if (currentQuestionIndex < sessionData[currentSession].questions.length - 1) {
                    currentQuestionIndex++;
                    renderApp();
                } else {
                    currentState = APP_STATE.RESULT_VIEW;
                    renderApp();
                }
            }, 150);
        }

        function calculateStats(answers) {
            const data = sessionData[currentSession];
            const stats = [];
            data.axisMap.forEach((qIndices) => {
                let axisSum = 0;
                let axisCount = 0;
                qIndices.forEach(qIndex => {
                    const answer = answers[qIndex];
                    if (answer !== undefined) {
                        axisSum += answer;
                        axisCount++;
                    }
                });
                const axisAverage = axisCount > 0 ? axisSum / axisCount : 0;
                stats.push((axisAverage / 5) * 100);
            });
            return { scores: stats };
        }

        function drawRadarChart(canvasId, stats, axes, themeColor, lightColor) {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const numAxes = axes.length;
            const angle = (Math.PI * 2) / numAxes;
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const maxRadius = (Math.min(canvas.width, canvas.height) / 2) * 0.65;
            const scores = stats.scores;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            ctx.strokeStyle = '#E5E7EB';
            ctx.lineWidth = 1;
            for (let i = 1; i <= 5; i++) {
                ctx.beginPath();
                const radius = (maxRadius / 5) * i;
                for (let j = 0; j < numAxes; j++) {
                    const x = centerX + radius * Math.cos(j * angle - Math.PI / 2);
                    const y = centerY + radius * Math.sin(j * angle - Math.PI / 2);
                    if (j === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                }
                ctx.closePath();
                ctx.stroke();
            }

            axes.forEach((axis, i) => {
                const x = centerX + maxRadius * Math.cos(i * angle - Math.PI / 2);
                const y = centerY + maxRadius * Math.sin(i * angle - Math.PI / 2);
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(x, y);
                ctx.stroke();

                ctx.font = 'bold 11px Noto Sans KR';
                ctx.fillStyle = '#9CA3AF';
                ctx.textAlign = 'center';
                const labelX = centerX + (maxRadius + 20) * Math.cos(i * angle - Math.PI / 2);
                const labelY = centerY + (maxRadius + 20) * Math.sin(i * angle - Math.PI / 2);
                ctx.fillText(axis, labelX, labelY + 5);
            });

            ctx.beginPath();
            ctx.fillStyle = themeColor + '33';
            ctx.strokeStyle = themeColor;
            ctx.lineWidth = 3;
            scores.forEach((score, i) => {
                const radius = (maxRadius * score) / 100;
                const x = centerX + radius * Math.cos(i * angle - Math.PI / 2);
                const y = centerY + radius * Math.sin(i * angle - Math.PI / 2);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
        }

        function triggerFileInput() {
            document.getElementById('image-upload').click();
        }

        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    characterImage = e.target.result;
                    document.getElementById('char-image-display').innerHTML = `<img src="${characterImage}" class="w-full h-full object-cover">`;
                };
                reader.readAsDataURL(file);
            }
        }

        function exportResultAsImage() {
            const element = document.getElementById('result-capture-area');
            html2canvas(element, {
                scale: 2,
                useCORS: true,
                backgroundColor: '#F9FAFB'
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `Idol_Analysis_${characterName}.png`;
                link.href = canvas.toDataURL();
                link.click();
            });
        }

        window.onload = renderApp;
    </script>
</body>
</html>